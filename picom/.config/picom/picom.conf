# === 1. 后端与性能 (Right: Performance) ===
backend = "glx"
vsync = true;

# 必须开启：允许全屏应用绕过合成器，保证游戏/视频帧率。
unredir-if-possible = true; 
unredir-if-possible-exclude = [
    "class_g = 'Google-chrome' && _NET_WM_STATE@:a = 'FULLSCREEN'"
];

# === 2. 阴影与模糊 (Good: Efficiency & Clarity) ===
# 禁用：这是纯粹的美学成本，浪费资源。
shadow = false; # 【修改】禁用
# blur = {};    # 【删除或注释】禁用模糊

# === 3. 淡入淡出 (Good: Snappiness) ===
fading = true;
# 调高 fade-delta，让动画更快、更干脆，符合DWM的快节奏。
fade-delta = 10; # 【修改】加快速度
fade-in-step = 0.05; 
fade-out-step = 0.05;
fade-exclude = [ ];


# === 4. 透明度与焦点 (Right: Clarity & Focus) ===
# 原则：活动窗口必须完全清晰，非活动窗口保持可读性但对比度降低。

# 活动窗口：设为 1.0，保证当前工作完全不受背景干扰。
active-opacity = 1.0;         # 【修改】设为 1.0 (完全不透明)
# 非活动窗口：略微透明，以便区分焦点，但不能影响文字可读性。
inactive-opacity = 0.90;      # 【修改】提高到 0.90
frame-opacity = 0.90;         # 边框略微透明
inactive-opacity-override = true;

# === 5. 规则与稳定性 (Right: Stability) ===
opacity-rule = [
    # 强制浏览器、视频播放器、图片查看器不透明，保证内容显示效果。
    "100:class_g = 'Google-chrome'",
    "100:class_g = 'Firefox'",
    "100:class_g = 'mpv'",
    "100:class_g = 'sxiv'",
    "100:class_g = 'feh'",
    # 强制真全屏窗口不透明 (防止性能问题)。
    "100:_NET_WM_STATE@[0]:32a = '_NET_WM_STATE_FULLSCREEN'",
    # 强制隐藏窗口立刻消失 (防止 DWM 切换 Tag 时的鬼影)。
    "0:_NET_WM_STATE@:32c *= '_NET_WM_STATE_HIDDEN'",
];

# 排除规则（清理了之前冗余的排除项）
opacity-exclude = [
    "class_g = 'flameshot'",
    "class_g = 'slop'",
    "_GTK_FRAME_EXTENTS@:c",
    "class_g = 'xterm'"
];

# === 6. 其它清理 ===
# 既然禁用了 blur，blur 相关的排除项可以删除或注释
# 确保 client opacity 检测开启 (保持，对 GTK 窗口兼容性好)
detect-client-opacity = true;
detect-client-leader = true;
